<html>
	<head>
		<meta charset="utf-8"/>
		<title>ACCESSIA TFG</title>
		<link rel="stylesheet" type="text/css" href="../styles/estilos.css">
		<link rel="stylesheet" type="text/css" href="../styles/footerStyle.css">
        <link rel="stylesheet" type="text/css" href="../styles/usuario.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="../js/loadFunctions.js"></script>
        <script src="../js/usuario.js"></script>
		<link href='https://fonts.googleapis.com/css?family=Cormorant Garamond' rel='stylesheet'>
        <script src="../js/chart/dist/chart.min.js"></script>
        <script src="../js/jspdf.min.js"></script>
        <script src="../js/jspdf-autotable.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.3.2/jspdf.plugin.autotable.js"></script>

	</head>
	<body onload="onloadPage()">
		<div id="cabecera">
			<script type="text/javascript">
				loader = new Loader();
				loader.loadHeader();
			</script>
		</div>
        <div class="pantallaUsuario">
            
                <div class="historial">
                    <div style="text-align: center;">
                        <span class="titulo">Historial</span>
                        <br>
                        <span class="tituloU">_______________</span>
                    </div>
                    <div class="divTabla">
                        <table class="tabla" id="tablaHistorial">
                            <thead>
                                <tr>
                                  <th class="cabeceraTabla">ID Pagina Vista</th>
                                  <th class="cabeceraTabla">URL</th>
                                  <th class="cabeceraTabla">Fecha de acceso</th>
                                </tr>
                              </thead>
                        </table>
                    </div>
                    <div class="divBtnPDF">
                        <button class="btnPDF" onclick="generarPDF()">Descargar</button>
                    </div>
                    <script>
                        function generarPDF(){
                            var pdf = new jsPDF();
                            pdf.text(20,20,"Tabla de las capturas generadas");

                            var columns = ["Id captura", "Fecha de generacion"];
                            var data = getHistorialEscritorioPDF();

                            pdf.autoTable(columns,data,
                            { margin:{ top: 25 },margin:{bottom: 50}}
                            );

                            pdf.save('prueba.pdf');
                        }
                    </script>
                </div>


                <div class="graficos" id="graficos">
                    <div style="text-align: center; margin-top: 5%;">
                        <span class="titulo">Gr√°ficos</span>
                        <br>
                        <span class="tituloU">_______________</span>
                    </div>
                    <div>
                        <canvas id="myChart" width="80%" height="20%"></canvas>
                        <script>
                            getTopPaginasVistas();
                        </script>
                    </div>
                </div>
                

                <div class="aplicacionesEscritorio">
                    <div style="text-align: center; margin-top: 5%;">
                        <span class="titulo">Capturas de aplicaciones de escritorio</span>
                        <br>
                        <span class="tituloU">_______________</span>

                    </div>
                    <div class="divTablaEscritorio">
                       
                        <table class="tabla" id="tablaDesktopApps">
                        </table>
                    </div>
                    <div class="divBotones">
                        <button onclick="addCount(1)" class="btnAvanzar">Siguiente</button>
                        <button onclick="addCount(-1)" class="btnAvanzar">Anterior</button>
                    </div>
                    <script type="text/javascript">
                        addDesktopHistorical();
                    </script>
                    <div class="divBtnPDF">
                        <button class="btnPDF" onclick="generarPDF2()">Descargar</button>
                    </div>
                    <script>
                        function generarPDF2(){
                            var pdf = new jsPDF();
                            pdf.text(20,20,"Tabla de las capturas generadas");

                            var columns = ["Id Pagina Vista", "URL" , "Fecha de acceso"];
                            var data = getHistorialEscritorioPDF2();

                            pdf.autoTable(columns,data,
                            { margin:{ top: 25 },margin:{bottom: 50}}
                            );

                            pdf.save('prueba.pdf');
                        }
                    </script>
                </div>

                <div class="pdf">
                    <div style="text-align: center; margin-top: 5%;">
                        <span class="titulo">Descarga del PDF con los datos</span>
                        <br>
                        <span class="tituloU">_______________</span>
                    </div>
                </div>
                

        </div>
		
		
		
	</body>
	<footer>
		<div id="footer">
			<script type="text/javascript">
				loader = new Loader();
				loader.loadFooter();
			</script>
		</div>
	</footer>
</html>